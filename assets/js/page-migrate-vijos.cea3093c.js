(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{555:function(s,t,a){"use strict";a.r(t);var r=a(1),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"migrate-vijos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migrate-vijos"}},[s._v("#")]),s._v(" migrate-vijos")]),s._v(" "),a("h2",{attrs:{id:"从-vijos-升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-vijos-升级"}},[s._v("#")]),s._v(" 从 Vijos 升级")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),a("p",[s._v("迁移会删除当前 Hydro 的所有数据（含用户账户信息）并移入 vj4 的数据。"),a("br"),s._v("\n请注意备份相关文件。")])]),s._v(" "),a("p",[s._v("请先完成 Hydro 的部署并完成对文件服务的配置(setting_file)。"),a("br"),s._v("\n在迁移数据之前，请先停止正在运行的 vj4 服务，仅保留其数据库开启。"),a("br"),s._v("\n请注意 Hydro 所在的数据库不应和源 vj4 数据库相同。"),a("br"),s._v("\n若您使用 vj4-docker ，可更改 "),a("code",[s._v("docker-compose.yml")]),s._v(" 将数据库映射至其他本机端口。")]),s._v(" "),a("p",[s._v("安装插件后，您应当能够在 控制面板>脚本管理 中找到名为 "),a("code",[s._v("migrateVijos")]),s._v(" 的脚本。"),a("br"),s._v("\n其参数格式如下：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"port"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vj4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"username"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"password"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("host: 数据库地址")]),s._v(" "),a("li",[s._v("port: 数据库端口")]),s._v(" "),a("li",[s._v("name: 数据库名")]),s._v(" "),a("li",[s._v("username&password: 账号密码，若无则填写空字符串")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("Tips")]),s._v(" "),a("p",[s._v("vj4-docker 中数据库名为 vj4，无账号密码。")])]),s._v(" "),a("p",[s._v("当脚本运行完成后，请重启 Hydro 实例，会自动完成之后的升级操作。\n迁移后，请使用原 vj4 的管理员账号登录实例。")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),a("p",[s._v("若您的 vj4 是由 vj2 或 tyvj 升级而来，在迁移完成后请不要卸载该插件，否则可能导致部分用户无法登录。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);