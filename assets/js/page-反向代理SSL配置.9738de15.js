(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{536:function(e,t,s){"use strict";s.r(t);var r=s(1),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"反向代理-ssl-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#反向代理-ssl-配置"}},[e._v("#")]),e._v(" 反向代理 / SSL 配置")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),s("p",[e._v("若使用反向代理，请注意将 Hydro 设置的 X-Host header 配置正确（参照下方样例配置）。"),s("br"),e._v("\nX-Real-Host 配置错误会导致用户无法登录等问题。"),s("br"),e._v("\nX-Real-Ip 配置错误会导致无法记录用户IP。")]),e._v(" "),s("p",[e._v("使用 "),s("code",[e._v("hydrooj cli system set server.xhost x-real-host")]),e._v(" 指定自定义 Host header。")])]),e._v(" "),s("p",[e._v("Hydro 可以直接监听 80/443 端口以提供服务，但是当您的服务器上需要同时运行多个 Web 服务时可能会发生端口冲突。"),s("br"),e._v("\n此时可以使用 Nginx, HaProxy, Caddy 等工具进行反向代理，"),s("a",{attrs:{href:"https://github.com/hydro-dev/Hydro/tree/master/examples/reverse_proxy",target:"_blank",rel:"noopener noreferrer"}},[e._v("此处"),s("OutboundLink")],1),e._v(" 提供了一些配置样例。")]),e._v(" "),s("p",[e._v("Hydro 推荐您使用 "),s("a",{attrs:{href:"https://caddyserver.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Caddy"),s("OutboundLink")],1),e._v("。以下为样例 Caddyfile。\n提示：如果您的服务器位于国内，则需要进行备案后才能使用 80 和 443 端口。")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("hydro.ac {\n  reverse_proxy http://localhost:8888 {\n    header_up x-real-ip {remote_host}\n    header_up x-real-host hydro.ac\n  }\n}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),s("p",[e._v("若您使用 Nginx，请注意配置 WebSocket 协议的反向代理。")])])])}),[],!1,null,null,null);t.default=a.exports}}]);